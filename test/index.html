<!DOCTYPE html>
<head>
  Test Torus.js
</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/@toruslabs/fetch-node-details"></script>
  <script src="../dist/torusUtils.umd.min.js"></script>
  <script>
    const fetchNodeDetails = new FetchNodeDetails()
    const torus = new TorusUtils()
    const verifier = 'google' // any verifier
    const verifierId = 'chai@tor.us' // any verifier id
    const idToken = 'eyJhbGciOiJSUzI1NiIsImtpZCI6IjY1YjNmZWFhZDlkYjBmMzhiMWI0YWI5NDU1M2ZmMTdkZTRkZDRkNDkiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJhenAiOiI4NzY3MzMxMDUxMTYtaTBoajNzNTNxaWlvNWs5NXBycGZtajBocDBnbWd0b3IuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiI4NzY3MzMxMDUxMTYtaTBoajNzNTNxaWlvNWs5NXBycGZtajBocDBnbWd0b3IuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIiOiIxMDAwOTc5MDY1MDg5MTAwMTkwOTgiLCJoZCI6InRvci51cyIsImVtYWlsIjoiY2hhaUB0b3IudXMiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiYXRfaGFzaCI6IjNOUllIb2pWSENDMGZRaldwZ1VhcXciLCJub25jZSI6InV1enZNNUVvbzVOdGhQdUpMN1RqRnYwQU95U2lmVyIsIm5hbWUiOiJDaGFpdGFueWEgUG90dGkiLCJwaWN0dXJlIjoiaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tL2EtL0FPaDE0R2dWb1ZRVzVyRFZiREwwWllNWEluWGYzVjRwYjJEM2FwbzYxUDd3PXM5Ni1jIiwiZ2l2ZW5fbmFtZSI6IkNoYWl0YW55YSIsImZhbWlseV9uYW1lIjoiUG90dGkiLCJsb2NhbGUiOiJlbiIsImlhdCI6MTU5NDI3NjQ3MSwiZXhwIjoxNTk0MjgwMDcxLCJqdGkiOiIyMjE2ZGJhMWZjMzVlZWJkMmZiYzQ1ODgwNGFmMjg0ZDkzNWU4MWM2In0.0gRcuFHGg8y1XoQKoxVK-4mGgdLQcDOtdoS0Bw4ncl5ikvZripDpv2FrcfBqfrC8BUyYcEAO9CLm3N2xDLy97QkfxbpOeK6U_cd69MiQsTOD1dczwUTEnP0yhFmv2PXxbE6hSLabkbYks-LFpqNU7Ne55LEve1pvWm8DWnfeKdc4S0O0GWSEvo0_7UbJKuc_IFOrEtvgzVVhWbjP4U82fgNiTQbw4xKRiBbBZPv_E7SwKVaibxOMoZGBiFyGR5M9zxuhyGd_wtKSy-A-YzBqZkolHFSilD67CCYGpFFMSdAkOC7a9oWge6JIcJ0Qv-7HlrENKeRhGNsulSQRTtYESw'
    // fetchNodeDetails
    //   .getNodeDetails()
    //   .then(({ torusNodeEndpoints, torusNodePub }) => torus.getPublicAddress(torusNodeEndpoints, torusNodePub, { verifier, verifierId }))
    //   .then((publicAddress) => console.log(publicAddress))
    fetchNodeDetails
  .getNodeDetails()
  .then(({ torusNodeEndpoints, torusIndexes }) =>
    torus.retrieveShares(torusNodeEndpoints, torusIndexes, verifier, { verifier_id: verifierId }, idToken)
  )
  .then((keyData) => console.log(keyData))
  </script>
</body>
